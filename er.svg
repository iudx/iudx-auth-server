<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="658px" preserveAspectRatio="none" style="width:357px;height:658px;" version="1.1" viewBox="0 0 357 658" width="357px" zoomAndPan="magnify"><defs><filter height="300%" id="f18mr8z1uz8b4j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[3105e977017215c62956ee5c147722ae]
class policy--><rect fill="#F8F8F8" filter="url(#f18mr8z1uz8b4j)" height="86.4141" id="policy" style="stroke: #383838; stroke-width: 1.5;" width="340" x="6" y="8"/><ellipse cx="154.25" cy="24" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M158.3594,30 L150.6406,30 L150.6406,17.6094 L158.3594,17.6094 L158.3594,19.7656 L153.0938,19.7656 L153.0938,22.4375 L157.8594,22.4375 L157.8594,24.5938 L153.0938,24.5938 L153.0938,27.8438 L158.3594,27.8438 L158.3594,30 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="35" x="174.75" y="28.1543">policy</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="345" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="12" y="54.2104">id</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="140" y="54.2104">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="268" y="54.2104">PRIMARY KEY</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="12" y="67.0151">policy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="140" y="67.0151">varchar(3145728)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="268" y="67.0151">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="12" y="79.8198">policy_in_json</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="140" y="79.8198">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="268" y="79.8198">NOT NULL</text><line style="stroke: #383838; stroke-width: 1.5;" x1="7" x2="345" y1="86.4141" y2="86.4141"/><!--MD5=[606c0e9a527600b962089599cf14ab26]
class token--><rect fill="#F8F8F8" filter="url(#f18mr8z1uz8b4j)" height="214.4609" id="token" style="stroke: #383838; stroke-width: 1.5;" width="292" x="30" y="154"/><ellipse cx="153.75" cy="170" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M157.8594,176 L150.1406,176 L150.1406,163.6094 L157.8594,163.6094 L157.8594,165.7656 L152.5938,165.7656 L152.5938,168.4375 L157.3594,168.4375 L157.3594,170.5938 L152.5938,170.5938 L152.5938,173.8438 L157.8594,173.8438 L157.8594,176 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="174.25" y="174.1543">token</text><line style="stroke: #383838; stroke-width: 1.5;" x1="31" x2="321" y1="186" y2="186"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="36" y="200.2104">id</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="164" y="200.2104">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="200.2104">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="36" y="213.0151">token</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="164" y="213.0151">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="213.0151">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="36" y="225.8198">expiry</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="164" y="225.8198">timestamp</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="225.8198">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="36" y="238.6245">request</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="164" y="238.6245">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="238.6245">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="36" y="251.4292">cert_serial</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="164" y="251.4292">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="251.4292">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="36" y="264.2339">cert_fingerprint</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="164" y="264.2339">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="264.2339">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="36" y="277.0386">issued_at</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="164" y="277.0386">timestamp</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="277.0386">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="36" y="289.8433">resource_ids</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="164" y="289.8433">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="289.8433">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="36" y="302.6479">introspected</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="164" y="302.6479">boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="302.6479">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="36" y="315.4526">revoked</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="164" y="315.4526">boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="315.4526">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="36" y="328.2573">cert_class</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="164" y="328.2573">integer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="328.2573">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="36" y="341.062">server_token</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="164" y="341.062">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="341.062">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="36" y="353.8667">providers</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="164" y="353.8667">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="260" y="353.8667">NOT NULL</text><line style="stroke: #383838; stroke-width: 1.5;" x1="31" x2="321" y1="360.4609" y2="360.4609"/><!--MD5=[0d2656fadf7191851afd801497368241]
class groups--><rect fill="#F8F8F8" filter="url(#f18mr8z1uz8b4j)" height="99.2188" id="groups" style="stroke: #383838; stroke-width: 1.5;" width="260" x="46" y="428"/><ellipse cx="149.75" cy="444" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M153.8594,450 L146.1406,450 L146.1406,437.6094 L153.8594,437.6094 L153.8594,439.7656 L148.5938,439.7656 L148.5938,442.4375 L153.3594,442.4375 L153.3594,444.5938 L148.5938,444.5938 L148.5938,447.8438 L153.8594,447.8438 L153.8594,450 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="44" x="170.25" y="448.1543">groups</text><line style="stroke: #383838; stroke-width: 1.5;" x1="47" x2="305" y1="460" y2="460"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="52" y="474.2104">id</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="148" y="474.2104">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="244" y="474.2104">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="52" y="487.0151">consumer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="148" y="487.0151">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="244" y="487.0151">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="52" y="499.8198">group_name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="148" y="499.8198">varchar</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="244" y="499.8198">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="52" y="512.6245">valid_till</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="148" y="512.6245">timestamp</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="244" y="512.6245">NOT NULL</text><line style="stroke: #383838; stroke-width: 1.5;" x1="47" x2="305" y1="519.2188" y2="519.2188"/><!--MD5=[e6ebd47dfd9b394ed517a8f9d34bd03e]
class crl--><rect fill="#F8F8F8" filter="url(#f18mr8z1uz8b4j)" height="60.8047" id="crl" style="stroke: #383838; stroke-width: 1.5;" width="271" x="40.5" y="587"/><ellipse cx="164.25" cy="603" fill="#C2C2C2" rx="11" ry="11" style="stroke: #383838; stroke-width: 1.0;"/><path d="M168.3594,609 L160.6406,609 L160.6406,596.6094 L168.3594,596.6094 L168.3594,598.7656 L163.0938,598.7656 L163.0938,601.4375 L167.8594,601.4375 L167.8594,603.5938 L163.0938,603.5938 L163.0938,606.8438 L168.3594,606.8438 L168.3594,609 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="15" x="184.75" y="607.1543">crl</text><line style="stroke: #383838; stroke-width: 1.5;" x1="41.5" x2="310.5" y1="619" y2="619"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="46.5" y="633.2104">crl</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="78.5" y="633.2104">jsonb</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="142.5" y="633.2104">NOT NULL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="238.5" y="633.2104">DEFAULT '[]'</text><line style="stroke: #383838; stroke-width: 1.5;" x1="41.5" x2="310.5" y1="639.8047" y2="639.8047"/><!--MD5=[f4865c0efd73d94b3f0b9eb1aa734669]
link policy to token--><!--MD5=[ded119f31d0e8159f5dafa27dfb53545]
link token to groups--><!--MD5=[7291062458606fc17de4a2b597c0a9e9]
link groups to crl--><!--MD5=[9271712fcc6f0d5b247b1455b41c2942]
@startuml
skinparam monochrome true

entity policy {
	id				varchar			PRIMARY KEY
	policy			varchar(3145728)	NOT NULL
	policy_in_json		jsonb				NOT NULL
}

entity token {
	id				varchar		NOT NULL
	token				varchar		NOT NULL
	expiry			timestamp		NOT NULL
	request			jsonb			NOT NULL
	cert_serial			varchar		NOT NULL
	cert_fingerprint		varchar		NOT NULL
	issued_at			timestamp		NOT NULL
	resource_ids		jsonb			NOT NULL
	introspected		boolean		NOT NULL
	revoked			boolean		NOT NULL
	cert_class			integer		NOT NULL
	server_token		jsonb			NOT NULL
	providers			jsonb			NOT NULL
}

entity groups {
	id			varchar		NOT NULL
	consumer		varchar		NOT NULL
	group_name	varchar		NOT NULL
	valid_till		timestamp		NOT NULL
}

entity crl {
	crl	jsonb		NOT NULL		DEFAULT '[]'
}

policy -[hidden]- token 
token -[hidden]- groups 
groups -[hidden]- crl
@enduml

PlantUML version 1.2020.00(Sat Jan 11 18:00:53 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-1
Operating System: OpenBSD
Default Encoding: US-ASCII
Language: en
Country: US
--></g></svg>